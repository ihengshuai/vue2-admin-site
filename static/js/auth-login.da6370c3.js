"use strict";(globalThis["webpackChunkvue2_admin"]=globalThis["webpackChunkvue2_admin"]||[]).push([[696],{24613:(e,t,r)=>{r.d(t,{Z:()=>p});var o=r(61369),n=r(10841),s=r(18402),a=r(99396),i=function(e,t,r,o){var n,s=arguments.length,a=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,r,o);else for(var i=e.length-1;i>=0;i--)(n=e[i])&&(a=(s<3?n(a):s>3?n(t,r,a):n(t,r))||a);return s>3&&a&&Object.defineProperty(t,r,a),a},l=function(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)};let d=class extends n["default"]{constructor(...e){super(...e),(0,o.Z)(this,"text",void 0),(0,o.Z)(this,"size",void 0),(0,o.Z)(this,"color",void 0),(0,o.Z)(this,"width",void 0),(0,o.Z)(this,"wrapperId",null),(0,o.Z)(this,"watermaskId",void 0),(0,o.Z)(this,"insertedStyle",void 0)}mounted(){this.renderWatermask(),this.$on("hook:beforeDestroy",(()=>{this.$el?.parentElement?.classList.remove(this.wrapperId),this.insertedStyle?.remove()}))}getInsertStyle(e){const t=document.createElement("style");t.innerHTML=`\n     .${this.wrapperId} {\n        position: relative;\n      }\n     .${this.wrapperId} > .${this.watermaskId} {\n        inset: 0;\n        position: absolute;\n        pointer-events: none;\n        z-index: 9999;\n        background: url(${e}) repeat;\n      }\n    `,this.insertedStyle=t,document.body.appendChild(t)}renderWatermask(){const e=this.$el.parentElement;if(!e)return;e.classList.remove(this.wrapperId),this.insertedStyle?.remove(),this.wrapperId="c"+(0,a.y_)()+"v",this.watermaskId="a"+(0,a.y_)()+"z",e.classList.add(this.wrapperId);const t=document.createElement("canvas"),r=window.devicePixelRatio||1,o=this.size*r+"px serif",n=t.getContext("2d"),s=this.text;n.font=o;const{width:i}=n.measureText(s),l=Math.max(this.width??e.offsetWidth/2,i);t.width=l,t.height=this.width??l/2,n.translate(t.width/2,t.height/2),n.rotate(Math.PI/180*-25),n.fillStyle=this.color,n.font=o,n.fillText(s,0,0);const d=t.toDataURL(),p=document.createElement("div");p.setAttribute("class",this.watermaskId),this.getInsertStyle(d),e.appendChild(p)}onTextChange(){this.renderWatermask()}onColorChange(){this.renderWatermask()}onSizeChange(){this.renderWatermask()}render(){return this.$slots.default}};i([(0,s.fI)({type:String,default:"",required:!0}),l("design:type",String)],d.prototype,"text",void 0),i([(0,s.fI)({type:Number,default:6}),l("design:type",Number)],d.prototype,"size",void 0),i([(0,s.fI)({type:String,default:"rgba(0, 0, 0, 0.4)"}),l("design:type",String)],d.prototype,"color",void 0),i([(0,s.fI)({type:Number}),l("design:type",Number)],d.prototype,"width",void 0),i([(0,s.RL)("text"),l("design:type",Function),l("design:paramtypes",[]),l("design:returntype",void 0)],d.prototype,"onTextChange",null),i([(0,s.RL)("color"),l("design:type",Function),l("design:paramtypes",[]),l("design:returntype",void 0)],d.prototype,"onColorChange",null),i([(0,s.RL)("size"),l("design:type",Function),l("design:paramtypes",[]),l("design:returntype",void 0)],d.prototype,"onSizeChange",null),d=i([s.wA],d);const p=d},48113:(e,t,r)=>{r.r(t),r.d(t,{default:()=>I});var o,n=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("Watermask",{attrs:{text:"by ihengshuai",color:"#333",size:8}},[t("div",{staticClass:"login-page"},[t("div",{staticClass:"login__container"},[t("h1",{staticClass:"login__container-title"},[e._v("登录")]),t("a-form-model",{ref:"form",attrs:{rules:e.rules,model:e.model,"label-col":e.labelCol,"wrapper-col":e.wrapperCol,layout:"vertical"}},[t("a-form-model-item",{attrs:{prop:"username"}},[t("a-input",{attrs:{placeholder:"请输入用户名(随意)"},model:{value:e.model.username.value,callback:function(t){e.$set(e.model.username,"value",t)},expression:"model.username.value"}},[t("a-icon",{attrs:{slot:"prefix",type:"user"},slot:"prefix"})],1)],1),t("a-form-model-item",{attrs:{prop:"password"}},[t("a-input-password",{attrs:{placeholder:"请输入密码(随意)"},model:{value:e.model.password.value,callback:function(t){e.$set(e.model.password,"value",t)},expression:"model.password.value"}},[t("a-icon",{attrs:{slot:"prefix",type:"lock"},slot:"prefix"})],1)],1),t("a-button",{attrs:{type:"primary",loading:e.formLoading,block:""},on:{click:e.handleSubmitForm}},[e._v(" 登录 ")])],1)],1)])])},s=[],a=r(61369),i=r(18402),l=r(24613),d=r(56800),p=r(74889),c=r(99396),u=r(11179),h=r(54173),m=function(e,t,r,o){var n,s=arguments.length,a=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,r,o);else for(var i=e.length-1;i>=0;i--)(n=e[i])&&(a=(s<3?n(a):s>3?n(t,r,a):n(t,r))||a);return s>3&&a&&Object.defineProperty(t,r,a),a},f=function(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)};let y=class extends((0,i.Wr)(d.T2,d.Ys)){constructor(...e){super(...e),(0,a.Z)(this,"useService",void 0),(0,a.Z)(this,"data",null),(0,a.Z)(this,"model",{username:{value:null},password:{value:null}}),(0,a.Z)(this,"labelCol",{span:0}),(0,a.Z)(this,"wrapperCol",{span:24})}get formRules(){return[{key:"username",rules:[{validator:(e,t,r)=>{t.value?r():r("请输入用户名")}}]},{key:"password",rules:[{validator:(e,t,r)=>{t.value?r():r("请输入密码")}}]}]}async handleRequestForm(e){this.formLoading=!0,this.data=await this.useService.login(e)}handleLoginSuccess(){(0,c.d8)(u.I.USER_LOGIN_COOKIE_,this.data.username,60);const e=this.$route.query.redirect,t="hash"===this.$router.mode;location.replace(e?decodeURIComponent(t?`/#${e}`:e):"/")}beforeRouteEnter(e,t,r){if((0,c.ej)(u.I.USER_LOGIN_COOKIE_))return r({name:h.I.dashboard});r()}onDataChange(e){e&&this.handleLoginSuccess()}};m([p.t6,f("design:type","function"===typeof(o="undefined"!==typeof p.KD&&p.KD)?o:Object)],y.prototype,"useService",void 0),m([(0,i.RL)("data",{immediate:!0}),f("design:type",Function),f("design:paramtypes",[Object]),f("design:returntype",void 0)],y.prototype,"onDataChange",null),y=m([(0,i.wA)({components:{Watermask:l.Z}})],y);const v=y,g=v;var w=r(43736),b=(0,w.Z)(g,n,s,!1,null,null,null);const I=b.exports}}]);